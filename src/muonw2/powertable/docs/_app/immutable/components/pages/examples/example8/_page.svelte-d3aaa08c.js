import{S as W,i as X,s as B,k as I,w as J,l as K,m as Q,x as U,h as L,n as Z,b as ee,y as ae,f as te,t as se,z as le,o as re,X as he}from"../../../../chunks/index-1fb9a013.js";import{d as G}from"../../../../chunks/jobs-f0c41956.js";import{P as ie,g as N}from"../../../../chunks/PowerTable-992c2bd3.js";function fe(T){let m,f,k,x={ptData:T[1],ptInstructs:T[2],ptOptions:T[3]};return f=new ie({props:x}),T[5](f),{c(){m=I("div"),J(f.$$.fragment),this.h()},l(r){m=K(r,"DIV",{class:!0});var c=Q(m);U(f.$$.fragment,c),c.forEach(L),this.h()},h(){Z(m,"class","MuonW PowerTable")},m(r,c){ee(r,m,c),ae(f,m,null),k=!0},p(r,[c]){const d={};c&2&&(d.ptData=r[1]),c&4&&(d.ptInstructs=r[2]),c&8&&(d.ptOptions=r[3]),f.$set(d)},i(r){k||(te(f.$$.fragment,r),k=!0)},o(r){se(f.$$.fragment,r),k=!1},d(r){r&&L(m),T[5](null),le(f)}}}const Y=1,F=2,H=3;function ne(T,m,f){let k,x=[],r=[],c={};re(()=>{f(1,x=G),f(3,c={userFunctions:{customParse:d},searchPhrase:"/a.*t/gimsu",searchIsRegex:!0,checkboxColumn:!0});let e=[];Object.keys(G[0]).forEach(p=>{e.push({key:p,title:p,parseAs:"unsafe-html"})}),e[4].filterPhrase="man",e[4].filterIsRegex=!1,e[5].filterPhrase="o",e[5].filterIsRegex=!1,f(2,r=e)});function d(e){return e=A(e,k,r),e}let O={[Y]:{open:'<span class="search-match">',close:"</span>"},[F]:{open:'<span class="filter-match">',close:"</span>"},[H]:{open:'<span class="overlap-match">',close:"</span>"}};function A(e,p,C){if(p!=null&&p.getData){let _=V(e,p,C);e=q(e,_,C)}return e}function V(e,p,C){var M,h,o,j,w;let _,b,v={},s=[],$=p.getData();_=(h=(M=$.search)==null?void 0:M.value)!=null?h:"",b=(j=(o=$.search)==null?void 0:o.isRegex)!=null?j:!1,C.forEach(t=>{var y,i,E,u;v[t.key]={value:(i=(y=$.filters[t.key])==null?void 0:y.value)!=null?i:"",isRegex:(u=(E=$.filters[t.key])==null?void 0:E.isRegex)!=null?u:!1}});let n,a;if(_){let t=new RegExp("");if(b===!1){let y=_.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").trim(),i=y.toLowerCase().match(/\S+/g);i!=null&&i.length&&(y=i.join("|")),t=new RegExp(y,"gi")}else{if(a=N(_),!a)throw new Error("RegEx is not valid!");n=(w=a==null?void 0:a.flags)!=null?w:"",t=new RegExp(a.pattern,n)}e.forEach((y,i)=>{C.forEach((E,u)=>{let l=[];b===!1||(n==null?void 0:n.indexOf("g"))!==-1?l=[...y[E.key].matchAll(t)]:l=[y[E.key].match(t)],l!=null&&l.length&&(s[i]||(s[i]={}),s[i][E.key]||(s[i][E.key]=[]),l.forEach(R=>{if(R)for(let P=R.index;P<R.index+R[0].length;P++)s[i][E.key][P]=Y}))})})}let g=new RegExp("");return C.forEach((t,y)=>{var i,E;if((i=v[t.key])!=null&&i.value){if(v[t.key].isRegex===!1){let u=v[t.key].value.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&").trim(),l=u.toLowerCase().match(/\S+/g);l!=null&&l.length&&(u=l.join("|")),g=new RegExp(u,"gi")}else{if(a=N(v[t.key].value),!a)throw new Error("RegEx is not valid!");n=(E=a==null?void 0:a.flags)!=null?E:"",g=new RegExp(a.pattern,n)}e.forEach((u,l)=>{let R=[];v[t.key].isRegex===!1||(n==null?void 0:n.indexOf("g"))!==-1?R=[...u[t.key].matchAll(g)]:R=[u[t.key].match(g)],R.length&&(s[l]||(s[l]={}),s[l][t.key]||(s[l][t.key]=[]),R.forEach(P=>{var D;if(P)for(let S=P.index;S<P.index+P[0].length;S++)(D=s[l][t.key][S])!=null&&D?s[l][t.key][S]=H:s[l][t.key][S]=F}))})}}),s}function q(e,p,C){let _=[];return e.forEach((b,v)=>{C.forEach(s=>{var $;if(_=($=p[v])==null?void 0:$[s.key]){let n=-1,a={startChar:-1,endChar:-1,type:-1},g=[],M=0;_.forEach((h,o)=>{n===-1?a={startChar:o,endChar:o,type:h}:o-M>1?(g.push({...a,endChar:M}),a={startChar:o,endChar:o,type:h}):h!=n?(g.push({...a}),a={startChar:o,endChar:o,type:h}):a.endChar=o,n=h,M=o}),a.type>0&&g.push(a),g=g.sort((h,o)=>o.startChar-h.startChar),g.forEach(h=>{b[s.key]=[b[s.key].slice(0,h.startChar),O[h.type].open,b[s.key].slice(h.startChar,h.endChar+1),O[h.type].close,b[s.key].slice(h.endChar+1)].join("")})}})}),e}function z(e){he[e?"unshift":"push"](()=>{k=e,f(0,k)})}return[k,x,r,c,A,z]}class ge extends W{constructor(m){super(),X(this,m,ne,fe,B,{highlighter:4})}get highlighter(){return this.$$.ctx[4]}}export{ge as default};
